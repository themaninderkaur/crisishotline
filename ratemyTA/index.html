<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RateMyTA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .star-rating .star {
      cursor: pointer;
      color: #d1d5db;
    }
    .star-rating .star.filled {
      color: #f59e0b;
    }
  </style>
</head>
<body class="bg-gray-100">
  <!-- Header -->
  <header class="bg-blue-600 text-white py-4 shadow-md">
    <div class="container mx-auto px-4 flex justify-between items-center">
      <h1 class="text-2xl font-bold">RateMyTA</h1>
      <nav>
        <a href="#" class="px-4 hover:underline">Home</a>
        <a href="#submit-review" class="px-4 hover:underline">Submit Review</a>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="bg-white py-12">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-4xl font-bold mb-4">Find and Rate Your Teaching Assistant</h2>
      <p class="text-gray-600 mb-8">Search for TAs, read reviews, and share your experiences to help others.</p>
      <div class="max-w-md mx-auto">
        <input type="text" id="searchInput" placeholder="Search by TA name or course..." class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600">
        <div id="searchResults" class="mt-4"></div>
      </div>
    </div>
  </section>

  <!-- TA Profile Section -->
  <section id="ta-profile" class="container mx-auto px-4 py-12 hidden">
    <div class="bg-white p-6 rounded-lg shadow-md">
      <h2 id="ta-name" class="text-2xl font-bold mb-2"></h2>
      <p id="ta-course" class="text-gray-600 mb-4"></p>
      <div class="flex items-center mb-4">
        <span class="text-lg font-semibold">Overall Rating:</span>
        <span id="ta-rating" class="ml-2 text-yellow-500"></span>
      </div>
      <h3 class="text-xl font-semibold mb-4">Reviews</h3>
      <div id="ta-reviews" class="space-y-4"></div>
    </div>
  </section>

  <!-- Submit Review Section -->
  <section id="submit-review" class="container mx-auto px-4 py-12">
    <div class="bg-white p-6 rounded-lg shadow-md max-w-lg mx-auto">
      <h2 class="text-2xl font-bold mb-4">Submit a Review</h2>
      <form id="reviewForm">
        <div class="mb-4">
          <label for="review-ta-name" class="block text-gray-700">TA Name</label>
          <input type="text" id="review-ta-name" class="w-full p-2 border rounded-lg" required>
        </div>
        <div class="mb-4">
          <label for="review-course" class="block text-gray-700">Course</label>
          <input type="text" id="review-course" class="w-full p-2 border rounded-lg" required>
        </div>
        <div class="mb-4">
          <label class="block text-gray-700">Rating</label>
          <div class="star-rating flex">
            <span class="star text-2xl" data-value="1">★</span>
            <span class="star text-2xl" data-value="2">★</span>
            <span class="star text-2xl" data-value="3">★</span>
            <span class="star text-2xl" data-value="4">★</span>
            <span class="star text-2xl" data-value="5">★</span>
          </div>
          <input type="hidden" id="review-rating" required>
        </div>
        <div class="mb-4">
          <label for="review-comment" class="block text-gray-700">Comment</label>
          <textarea id="review-comment" class="w-full p-2 border rounded-lg" rows="4" required></textarea>
        </div>
        <button type="submit" class="w-full bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700">Submit Review</button>
      </form>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-6">
    <div class="container mx-auto px-4 text-center">
      <p>&copy; 2025 RateMyTA. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Sample TA data (in a real app, this would come from a database)
    let tas = [
      { name: "Jane Smith", course: "CS101", rating: 4.5, reviews: [{ rating: 5, comment: "Amazing TA, very helpful!" }, { rating: 4, comment: "Good explanations but sometimes late." }] },
      { name: "John Doe", course: "MATH202", rating: 3.8, reviews: [{ rating: 4, comment: "Solid TA, knows the material." }, { rating: 3, comment: "Could be more engaging." }] }
    ];

    // Search functionality
    const searchInput = document.getElementById('searchInput');
    const searchResults = document.getElementById('searchResults');
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase();
      searchResults.innerHTML = '';
      if (query) {
        const filteredTAs = tas.filter(ta => ta.name.toLowerCase().includes(query) || ta.course.toLowerCase().includes(query));
        filteredTAs.forEach(ta => {
          const div = document.createElement('div');
          div.className = 'bg-gray-100 p-3 mb-2 rounded-lg cursor-pointer hover:bg-gray-200';
          div.textContent = `${ta.name} - ${ta.course}`;
          div.addEventListener('click', () => showTAProfile(ta));
          searchResults.appendChild(div);
        });
      }
    });

    // Show TA profile
    function showTAProfile(ta) {
      const profileSection = document.getElementById('ta-profile');
      document.getElementById('ta-name').textContent = ta.name;
      document.getElementById('ta-course').textContent = ta.course;
      document.getElementById('ta-rating').textContent = `${ta.rating} / 5`;
      const reviewsContainer = document.getElementById('ta-reviews');
      reviewsContainer.innerHTML = '';
      ta.reviews.forEach(review => {
        const div = document.createElement('div');
        div.className = 'border-b pb-2';
        div.innerHTML = `<p class="text-yellow-500">${'★'.repeat(review.rating)}</p><p>${review.comment}</p>`;
        reviewsContainer.appendChild(div);
      });
      profileSection.classList.remove('hidden');
      profileSection.scrollIntoView({ behavior: 'smooth' });
    }

    // Star rating functionality
    const stars = document.querySelectorAll('.star');
    stars.forEach(star => {
      star.addEventListener('click', () => {
        const rating = star.dataset.value;
        document.getElementById('review-rating').value = rating;
        stars.forEach(s => s.classList.remove('filled'));
        for (let i = 0; i < rating; i++) {
          stars[i].classList.add('filled');
        }
      });
    });

    // Handle review submission
    const reviewForm = document.getElementById('reviewForm');
    reviewForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const name = document.getElementById('review-ta-name').value;
      const course = document.getElementById('review-course').value;
      const rating = document.getElementById('review-rating').value;
      const comment = document.getElementById('review-comment').value;

      // Find or create TA
      let ta = tas.find(t => t.name === name && t.course === course);
      if (!ta) {
        ta = { name, course, rating: 0, reviews: [] };
        tas.push(ta);
      }

      // Add review
      ta.reviews.push({ rating: parseInt(rating), comment });
      ta.rating = (ta.reviews.reduce((sum, r) => sum + r.rating, 0) / ta.reviews.length).toFixed(1);

      // Reset form
      reviewForm.reset();
      stars.forEach(s => s.classList.remove('filled'));
      alert('Review submitted successfully!');
    });
  </script>
</body>
</html>
